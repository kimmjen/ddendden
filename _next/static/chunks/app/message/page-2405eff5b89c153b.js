(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{1612:(e,t,a)=>{Promise.resolve().then(a.bind(a,45))},45:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5878),l=a(3446);function n(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(""),[r,o]=(0,l.useState)({key:"",ko:"",en:""}),[c,d]=(0,l.useState)(null),[i,h]=(0,l.useState)(null),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[];for(let s in e.en){let l=t?"".concat(t,".").concat(s):s;"object"==typeof e.en[s]?a=[...a,...u({en:e.en[s],ko:e.ko[s]},l)]:a.push({key:l,en:e.en[s],ko:e.ko[s]})}return a},p=e=>{let t={en:{},ko:{}};return e.forEach(e=>{let a=e.key.split("."),s=t.en,l=t.ko;a.forEach((t,n)=>{n===a.length-1?(s[t]=e.en,l[t]=e.ko):(s[t]=s[t]||{},l[t]=l[t]||{},s=s[t],l=l[t])})}),t},x=async()=>{try{let e=await fetch("/api/translations"),a=await e.json();t(u(a))}catch(e){console.error("번역 로드 실패:",e)}};(0,l.useEffect)(()=>{x()},[]);let y=async t=>{t.preventDefault();let a=p([...e,r]);try{(await fetch("/api/translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(x(),o({key:"",ko:"",en:""}))}catch(e){console.error("번역 추가 실패:",e)}},m=e=>{d(e.key),h({...e})},b=()=>{d(null),h(null)},k=async()=>{if(!i)return;let t=p(e.map(e=>e.key===i.key?i:e));try{(await fetch("/api/translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(x(),d(null),h(null))}catch(e){console.error("번역 수정 실패:",e)}},j=async t=>{if(!confirm("정말 삭제하시겠습니까?"))return;let a=p(e.filter(e=>e.key!==t));try{(await fetch("/api/translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&x()}catch(e){console.error("번역 삭제 실패:",e)}},g=e.filter(e=>e.key.toLowerCase().includes(a.toLowerCase())||e.ko.toLowerCase().includes(a.toLowerCase())||e.en.toLowerCase().includes(a.toLowerCase()));return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"번역 관리"}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("input",{type:"text",placeholder:"검색...",className:"w-full p-2 border rounded",value:a,onChange:e=>n(e.target.value)})}),(0,s.jsxs)("form",{onSubmit:y,className:"mb-8 p-4 bg-white rounded shadow",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"새 번역 추가"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"키 (예: navigation.home)",className:"p-2 border rounded",value:r.key,onChange:e=>o({...r,key:e.target.value}),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"한국어",className:"p-2 border rounded",value:r.ko,onChange:e=>o({...r,ko:e.target.value}),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"영어",className:"p-2 border rounded",value:r.en,onChange:e=>o({...r,en:e.target.value}),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"추가"})]}),(0,s.jsx)("div",{className:"bg-white rounded shadow overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsx)("th",{className:"p-3 text-left",children:"키"}),(0,s.jsx)("th",{className:"p-3 text-left",children:"한국어"}),(0,s.jsx)("th",{className:"p-3 text-left",children:"영어"}),(0,s.jsx)("th",{className:"p-3 text-left",children:"작업"})]})}),(0,s.jsx)("tbody",{children:g.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-3",children:e.key}),(0,s.jsx)("td",{className:"p-3",children:c===e.key?(0,s.jsx)("input",{type:"text",className:"w-full p-1 border rounded",value:(null==i?void 0:i.ko)||"",onChange:e=>h(t=>t?{...t,ko:e.target.value}:t)}):(0,s.jsx)("span",{children:e.ko})}),(0,s.jsx)("td",{className:"p-3",children:c===e.key?(0,s.jsx)("input",{type:"text",className:"w-full p-1 border rounded",value:(null==i?void 0:i.en)||"",onChange:e=>h(t=>t?{...t,en:e.target.value}:t)}):(0,s.jsx)("span",{children:e.en})}),(0,s.jsx)("td",{className:"p-3",children:c===e.key?(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)("button",{onClick:k,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"저장"}),(0,s.jsx)("button",{onClick:b,className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",children:"취소"})]}):(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"수정"}),(0,s.jsx)("button",{onClick:()=>j(e.key),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"삭제"})]})})]},e.key))})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[707,955,358],()=>t(1612)),_N_E=e.O()}]);